<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> - Hugo Whisper Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="www.example.com/favicon.png">

  
  
  <link rel="stylesheet" href="/www.example.com/css/style.min.db3912ad8707aa240233773715ee8b9db78ef7c625b4ec40841d61533ab76acc.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.example.com/">
        <span>Home</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="www.example.com"><img alt="Logo" src="/www.example.com" /></a>
    </div>
    <div class="logo-mobile">
      <a href="www.example.com"><img alt="Logo" src="/www.example.com" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.example.com/">
        <span>Home</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>



    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        
        <div class="col-12 col-md-9">
          
<h1 class="title"></h1>
<div class="content ">
  <h2 id="hardware-y124">Hardware (y124)</h2>
<p>Three phisical machine, spinning disks</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">VENDOR
	Manufacturer: Cisco Systems Inc
	Product Name: UCSC-C220-M4L
MEMORY
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
	Size: 32 GB
CPUs
	Version: Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz
	Max Speed: 4000 MHz
	Core Enabled: 8
	Thread Count: 16
	Version: Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz
	Max Speed: 4000 MHz
	Core Enabled: 8
	Thread Count: 16
DISKS
     NAME                 SIZE TYPE FSTYPE      MOUNTPOINT       VENDOR   MODEL
     sda                  5.5T disk                              HGST     HUS726060AL4210
     ├─sda1               200M part vfat        /boot/efi
     ├─sda2               500M part xfs         /boot
     └─sda3               5.5T part LVM2_member
       ├─vg01-root         50G lvm  ext4        /
       ├─vg01-swap          4G lvm  swap
       └─vg01-home        5.4T lvm  xfs         /home
     sdb                  5.5T disk                              HGST     HUS726060AL4210
     └─sdb1               5.5T part LVM2_member
       └─vg02-docker       10T lvm  ext4        /var/lib/docker
     sdc                  5.5T disk                              HGST     HUS726060AL4210
     └─sdc1               5.5T part LVM2_member
       ├─vg02-docker       10T lvm  ext4        /var/lib/docker
       └─vg02-kubernetes  1.4T lvm  ext4        /var/lib/kubelet
     sdd                  5.5T disk                              HGST     HUS726060AL4210
     └─sdd1               5.5T part LVM2_member
       ├─vg02-data          5T lvm  ext4        /data
       └─vg02-kubernetes  1.4T lvm  ext4        /var/lib/kubelet
</code></pre></div><h2 id="test-method">Test method</h2>
<ul>
<li>Scheduled three OM to three different machines with Kubernetes</li>
<li>SCM is mocked with byteman</li>
<li>Freon is started from the same machine (one instance, 10 threads)</li>
<li>Used docker image: elek/ozone-dev:8c4500b06 (master + HDDS-3878)</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">ozone freom omkg --om-service-id=omservice -n 100000
</code></pre></div><h2 id="tests">Tests</h2>
<h3 id="first-run">First run</h3>
<ul>
<li>Default setup</li>
<li>real HDD</li>
<li>1 freon instance (10 threads)</li>
</ul>
<p><strong>~ 252 tps/sec (alloc + commit)</strong></p>
<h3 id="second-run">Second run</h3>
<ul>
<li>Default setup</li>
<li>real HDD</li>
<li>1 freon instance (10 threads)</li>
<li><strong>adjusted log segment size</strong></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">OZONE-SITE.XML_ozone.om.ratis.segment.preallocated.size: 16MB
OZONE-SITE.XML_ozone.om.ratis.segment.size: 16MB
</code></pre></div><p>1 freon instance (10 threads)</p>
<p><strong>~ 390 tps/sec (alloc + commit)</strong></p>
<h3 id="third-run">Third run</h3>
<ul>
<li>Default setup</li>
<li>real HDD</li>
<li>1 freon instance (10 threads)</li>
<li><strong>adjusted log segment size</strong></li>
<li><strong>adjusted handler number</strong></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">OZONE-SITE.XML_ozone.om.ratis.segment.preallocated.size: 16MB
OZONE-SITE.XML_ozone.om.ratis.segment.size: 16MB
OZONE-SITE.XML_ozone.om.handler.count.key: &#34;250&#34;
OZONE-SITE.XML_ozone.scm.handler.count.key: &#34;250&#34;

</code></pre></div><p><strong>~ 390 tps/sec (alloc + commit)</strong></p>
<h3 id="forth-run">Forth run</h3>
<ul>
<li>Default setup</li>
<li>real HDD</li>
<li>1 freon instance (10 threads)</li>
<li><strong>adjusted log segment size</strong></li>
<li><strong>adjusted handler number</strong></li>
<li><strong>30 freon containers / JVM</strong> (running on the same 3 physical machines)</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">OZONE-SITE.XML_ozone.om.ratis.segment.preallocated.size: 16MB
OZONE-SITE.XML_ozone.om.ratis.segment.size: 16MB
OZONE-SITE.XML_ozone.om.handler.count.key: &#34;250&#34;
OZONE-SITE.XML_ozone.scm.handler.count.key: &#34;250&#34;

</code></pre></div><p><strong>~ 2500 tps/sec (alloc + commit)</strong></p>
<h3 id="fifth-run">Fifth run</h3>
<ul>
<li>Default setup</li>
<li>real HDD</li>
<li>1 freon instance (10 threads)</li>
<li><strong>with adjusted log segment size</strong></li>
<li><strong>adjusted handler number</strong></li>
<li><strong>30 freon containers / JVM</strong> (running on the same 3 physical machines)</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">OZONE-SITE.XML_ozone.om.handler.count.key: &#34;250&#34;
OZONE-SITE.XML_ozone.scm.handler.count.key: &#34;250&#34;

</code></pre></div><p><strong>~ 390 tps/sec (alloc + commit)</strong></p>

</div>
</div>

        </div>
      </div>
    </div>
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            Based on hugo-whisper theme.
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/www.example.com/js/scripts.min.1237ff71925bb8625c97a9af8db4c54525258bedfd7c47493daaff723bea755e.js"></script>
  

  
  
  
    
  


</body>

</html>
